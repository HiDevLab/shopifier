<div class="row space-between" >
    <h2 class="mt-auto"><strong>Tags</strong></h2>
    <a class="ref mt-auto" (click)="onViewAllTags()">View all tags</a>
</div>
<div>
    <input [(ngModel)]="tag_input" class="mt20 font16"
           (keydown)="onKeyDown($event)"
           (focus)="onInputFocus($event)">

    <popover id="tags-popover" class="up w24 hide">
        <div class="pv3">
            <div class="row space-between pl20 pt20" *ngIf="!tag_input">
                <h3 class="mt-auto color-tags font11 bold">FREQUENTLY USED TAGS</h3>
            </div>
            <div class="row sep mt10" *ngIf="!tag_input"></div>
            <ul class="rows">
                <li class="row add" *ngIf="tag_input && all_tags.indexOf(tag_input)<0">
                    <a class="row ph20 pv5 sel"
                        (click)="addTag()">
                        <h3 class="bold">Add</h3>
                        {% verbatim %}{{ '"' + tag_input+'"' }}{% endverbatim %}
                    </a>
                </li>
                <li class="row" *ngFor="let tag of all_tags|not_in:tags|stastartswith:tag_input; let i=index;">
                    <a class="ph20 pv5"
                        (click)="insertTag($event, tag)"
                        [ngClass]="{sel:i==current_i}">
                        {% verbatim %}{{ tag }}{% endverbatim %}
                    </a>
                </li>
            </ul>
        </div>
    </popover>

</div>
<ul class="mt10">
    <li class="tag" *ngFor="let tag of tags; let i=index" >
        {% verbatim %}{{ tag }}{% endverbatim %}
        <a class="fa fa-times" aria-hidden="true"
            (click)="deleteTag(i)"></a>
    </li>
</ul>

