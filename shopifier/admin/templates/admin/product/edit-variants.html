<div *ngIf="object_id" class="rows pt20 center">
    <div class="row w16 left pl30">
        <div class="rows ml30" [ngClass]="{w16: options.length==1,w20: options.length==2,w24: options.length==3}">
            <div class="form p20">
                <div class="row mh20">
                    <strong class="col mr-auto font16">Variants</strong>
                    <a class="col ref mr20" (click)="showReorderVariants=true">Reorder variants</a>
                    <a class="col ref mr20" (click)="showEditOptions=true">Edit options</a>
                    <a class="col ref" >Add variant</a>
                </div>
                <ul *ngIf="options" class="row wrap mv20">
                    <li class="mr15"> Select: </li>
                    <li class="ref color_subdued mr15" (click)="selectVariants(1)">All</li>
                    <li class="ref color_subdued mr15" (click)="selectVariants(0)">None</li>
                    <span class="row wrap" *ngFor="let option of options;let i = index;" >
                        <li *ngFor="let val of option.values" 
                            class="ref mr15" [ngClass]="{color_green: i==0, color_purple: i==1, color_orange: i==2}"
                            (click)="filterVariants(i, val)">
                            {% templatetag openvariable %}val{% templatetag closevariable %}
                        </li>
                    </span>
                </ul>
                <div *ngIf="countSelectedVariants()[0]" class="select-bulk">
                    <div>
                        <div class="input">
                            <input type="checkbox" id="select-bulk-variants" [(ngModel)]="selectAllVariants" (click)="selectVariants(0)">
                            <label for="select-bulk-variants">
                                <i *ngIf="!selectAllVariants" class="fa fa-minus"></i>
                                <i *ngIf="selectAllVariants" class="fa fa-check"></i>
                            </label>
                            {% templatetag openvariable %}countSelectedVariants()[1]{% templatetag closevariable %}
                        </div>
                        <div>
                            <a>Edit variants</a>
                        </div>
                        <div id="base-bulk-actions" (click)="refreshDOM(); onPopover($event, popover_bulk_actions)">
                            <a>Bulk actions</a>
                            <span class="fa fa-caret-down ml3"></span>
                        </div>
                        <popover id="bulk-actions" class="down color_default hide mt18">
                            <div class="default-popover">
                               <ul>
                                    <li>Change prices</li>
                                    <li [ngClass]="{disabled:!updateInventory}">Update inventory</li>
                                    <li>Update images</li>
                                    <li>Delete Variants</li>
                                    <li>Continue sellingwhen sold out</li>
                                    <li>Stop selling when sold out</li>
                                    <li class="disabled">DUPLICATE VARIANS</li>
                                </ul>
                                <div class="row sep mh5"></div>
                                <ul>
                                    <li>... in another Size</li>
                                </ul>
                            </div>
                        </popover>
                    </div>
                </div>
                <div class="rows edit-variant-table">
                    <table class="row min-w24 w-auto">
                        <thead *ngIf="!countSelectedVariants()[0]">
                            <tr>
                                <th class="select">
                                     <div class="input">
                                        <input type="checkbox" id="select-all-variants" [(ngModel)]="selectAllVariants" (click)="selectVariants(1)">
                                        <label for="select-all-variants">
                                            <i class="fa fa-check" aria-hidden="true"></i>
                                        </label>
                                        <span class="fa fa-caret-down" aria-hidden="true"></span>
                                    </div>
                                </th>
                                <th class="image"></th>
                                <th *ngFor="let option of options; let i = index;">
                                    {% templatetag openvariable %}option.name{% templatetag closevariable %}
                                </th>
                                <th>Price</th><th>SKU</th>
                            </tr>
                        </thead>
                        <tbody id="variants-table" class="user_select_none">
                            <tr *ngFor="let variant of variants; let k = index"
                                attr.data-variant="{% verbatim %}{{ k }}{% endverbatim %}"
                                [ngClass]="{selected: variant.select}"
                                (dragover)="handleDragOver($event, dragOverVariant); currentVariant=k"
                                (drop)="addImages($event, k)"
                                [attr.data-dropzone]="true">
                                <td class="select" [ngClass]="{hide: currentVariant==k}">
                                    <span class="input">
                                        <input type="checkbox" [attr.id]="'var-'+k" [(ngModel)]="variant.select">
                                        <label [attr.for]="'var-'+k"><i class="fa fa-check backgraund-form" aria-hidden="true"></i></label>
                                    </span>
                                </td>
                                <td class="image" [ngClass]="{hide: currentVariant==k}">
                                    <div *ngIf="!variant.img">
                                        <a class="fa fa-picture-o"></a>
                                    </div>
                                    <span *ngIf="variant.img" >
                                        <img src="{% verbatim %}{{variant.img.attachment || variant.img.src}}{% endverbatim %}">
                                    </span>
                                </td>
                                <td *ngIf="variant.option1" class="option" [ngClass]="{hide: currentVariant==k}">
                                    <input class="color_green" [(ngModel)]="variant.option1">
                                </td>
                                <td *ngIf="variant.option2" class="option" [ngClass]="{hide: currentVariant==k}">
                                    <input class="color_purple" [(ngModel)]="variant.option2">
                                 </td>
                                <td *ngIf="variant.option3"  class="option" [ngClass]="{hide: currentVariant==k}">
                                    <input class="color_orange" [(ngModel)]="variant.option3">
                                </td>
                                <td [ngClass]="{hide: currentVariant==k}"><input [(ngModel)]="variant.price"></td>
                                <td [ngClass]="{hide: currentVariant==k}"><input [(ngModel)]="variant.sku"></td>
                                <td [ngClass]="{hide: currentVariant==k}"><a class="btn">Edit</a><a class="btn fa fa-trash"></a></td>
                                <span *ngIf="isIndex(currentVariant) && currentVariant==k" class="hover" (dragleave)="dragLeave($event)">
                                    <div>
                                        Drop to set the variant image for 
                                        <span class="color_green">{% templatetag openvariable %}variant.option1{% templatetag closevariable %}</span>
                                        <span *ngIf="variant.option2" class="color_purple">, {% templatetag openvariable %}variant.option2{% templatetag closevariable %}</span>
                                        <span *ngIf="variant.option3" class="color_orange">, {% templatetag openvariable %}variant.option3{% templatetag closevariable %}</span>
                                    </div>
                                </span>
                            </tr>
                         </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>